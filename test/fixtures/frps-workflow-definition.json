{
  "code": "frps-private-beta",
  "pages": {
    "cases": {
      "details": {
        "banner": {
          "title": {
            "ref": "$.payload.businessName",
            "type": "string"
          },
          "summary": {
            "sbi": {
              "label": "SBI",
              "ref": "$.payload.identifiers.sbi",
              "type": "string"
            },
            "reference": {
              "label": "Reference",
              "ref": "$.caseRef",
              "type": "string"
            },
            "scheme": {
              "label": "Scheme",
              "ref": "$.payload.answers.scheme",
              "type": "string"
            },
            "createdAt": {
              "label": "Created At",
              "ref": "$.payload.createdAt",
              "type": "date"
            }
          }
        },
        "tabs" : {
          "caseDetails" : {
            "sections" : [
              {
                "id" : "title",
                "component" : "heading",
                "text" : "Application",
                "level" : 2,
                "classes" : "govuk-!-margin-top-8 govuk-!-margin-bottom-1"
              },
              {
                "id" : "submittedDate",
                "component" : "container",
                "classes" : "govuk-body",
                "elements" : [
                  {
                    "text" : "submitted:",
                    "classes" : "govuk-!-font-weight-regular"
                  },
                  {
                    "text" : "$.payload.submittedAt",
                    "classes" : "govuk-!-font-weight-bold",
                    "filters" : [
                      {
                        "name" : "formatDate"
                      }
                    ]
                  }
                ]
              },
              {
                "title" : "Answers",
                "type" : "object",
                "fields" : [
                  {
                    "text" : "$.payload.answers.scheme",
                    "type" : "string",
                    "label" : "Scheme"
                  },
                  {
                    "text" : "$.payload.answers.year",
                    "type" : "number",
                    "label" : "Year"
                  },
                  {
                    "text" : "$.payload.answers.hasCheckedLandIsUpToDate",
                    "type" : "boolean",
                    "label" : "Has checked land is up to date?"
                  },
                  {
                    "text" : "$.payload.answers.agreementName",
                    "type" : "string",
                    "label" : "Agreement Name"
                  }
                ],
                "component" : "list"
              },
              {
                "rowsRef" : "$.payload.answers.actionApplications[*]",
                "title" : "Selected actions for land parcels",
                "type" : "array",
                "fields" : [
                  {
                    "text" : "@.sheetId",
                    "type" : "string",
                    "label" : "Sheet Id"
                  },
                  {
                    "text" : "@.parcelId",
                    "type" : "string",
                    "label" : "Parcel Id"
                  },
                  {
                    "text" : "@.code",
                    "type" : "string",
                    "label" : "Code"
                  },
                  {
                    "id" : "appliedFor",
                    "component" : "container",
                    "label" : "Applied For",
                    "elements" : [
                      {
                        "text" : "@.appliedFor.quantity",
                        "type" : "number",
                        "filters" : [
                          {
                            "name" : "fixed",
                            "decimals" : 4
                          }
                        ]
                      },
                      {
                        "text" : "@.appliedFor.unit",
                        "type" : "string"
                      }
                    ]
                  }
                ],
                "component" : "table",
                "firstCellIsHeader" : true
              }
            ]
          },
          "agreements" : {
            "renderIf" : "$.agreements[0]",
            "sections" : [
              {
                "id" : "title",
                "component" : "heading",
                "text" : "Case grant funding agreement",
                "level" : 2,
                "classes" : "govuk-!-margin-top-8"
              },
              {
                "id" : "subtitle",
                "component" : "heading",
                "text" : "Check the grant funding agreement system to see the final terms of the agreement.",
                "level" : 3,
                "classes" : "govuk-inset-text"
              },
              {
                "id" : "agreementName",
                "component" : "container",
                "classes" : "govuk-body",
                "elements" : [
                  {
                    "text" : "Agreement name:",
                    "classes" : "govuk-!-font-weight-bold"
                  },
                  {
                    "text" : "[agreement name]"
                  }
                ]
              },
              {
                "type" : "array",
                "component" : "table",
                "rowsRef" : "$.agreements[*]",
                "fields" : [
                  {
                    "label" : "Reference",
                    "text" : "@.agreementRef"
                  },
                  {
                    "label" : "Date",
                    "component" : "date",
                    "text" : "@.createdAt"
                  },
                  {
                    "id" : "internal",
                    "component" : "container",
                    "label" : "View",
                    "elements" : [
                      {
                        "label" : "Internal",
                        "component" : "url",
                        "text" : "Internal",
                        "href" : {
                          "urlTemplate" : "$.definitions.agreementsService.internalUrlTemplate",
                          "params" : {
                            "agreementRef" : "@.agreementRef"
                          }
                        },
                        "target" : "_blank",
                        "rel" : "noopener",
                        "classes" : "govuk-!-margin-right-6"
                      },
                      {
                        "label" : "External",
                        "component" : "copyToClipboard",
                        "text" : {
                          "urlTemplate" : "$.definitions.agreementsService.externalUrlTemplate",
                          "params" : {
                            "agreementRef" : "@.agreementRef"
                          }
                        },
                        "buttonText" : "Copy external",
                        "feedbackText" : "Copied to clipboard"
                      }
                    ]
                  },
                  {
                    "label" : "Status",
                    "component" : "status",
                    "text" : "@.agreementStatus",
                    "classesMap" : {
                      "OFFERED" : "govuk-tag--yellow",
                      "ACCEPTED" : "govuk-tag--blue",
                      "WITHDRAWN" : "govuk-tag--grey"
                    }
                  }
                ]
              }
            ]
          }
        }
      }
    }
  },
  "stages": [
    {
      "id": "application-receipt",
      "title": "Application Receipt",
      "taskGroups": [
        {
          "id": "application-receipt-tasks",
          "title": "Application Receipt tasks",
          "tasks": [
            {
              "id": "simple-review",
              "title": "Simple Review",
              "type": "boolean"
            }
          ]
        }
      ],
      "actionsTitle": "Decision",
      "actions": [
        {
          "id": "approve",
          "label": "Approve",
          "comment": {
            "label": "Approval reason note",
            "helpText": "All notes will be saved for auditing purposes",
            "type": "REQUIRED"
          }
        }
      ]
    },
    {
      "id": "contract",
      "title": "Stage for contract management",
      "taskGroups": [],
      "actions": []
    }
  ],
  "requiredRoles": {
    "allOf": ["ROLE_RPA_ADMIN"],
    "anyOf": ["ROLE_RPA_ADMIN"]
  }
}
