{
  "code": "frps-private-beta",
  "pages": {
    "cases": {
      "details": {
        "banner": {
          "title": {
            "ref": "$.payload.businessName",
            "type": "string"
          },
          "summary": {
            "sbi": {
              "label": "SBI",
              "ref": "$.payload.identifiers.sbi",
              "type": "string"
            },
            "reference": {
              "label": "Reference",
              "ref": "$.caseRef",
              "type": "string"
            },
            "scheme": {
              "label": "Scheme",
              "ref": "$.payload.answers.scheme",
              "type": "string"
            },
            "createdAt": {
              "label": "Created At",
              "ref": "$.payload.createdAt",
              "type": "date"
            }
          }
        },
        "tabs": {
          "caseDetails": {
            "title": "Application",
            "sections": [
              {
                "title": "Answers",
                "type": "object",
                "component": "list",
                "fields": [
                  {
                    "ref": "$.payload.answers.scheme",
                    "type": "string",
                    "label": "Scheme"
                  },
                  {
                    "ref": "$.payload.answers.year",
                    "type": "number",
                    "label": "Year"
                  },
                  {
                    "ref": "$.payload.answers.hasCheckedLandIsUpToDate",
                    "type": "boolean",
                    "label": "Has checked land is up to date?"
                  },
                  {
                    "ref": "$.payload.answers.agreementName",
                    "type": "string",
                    "label": "Agreement Name"
                  }
                ]
              },
              {
                "title": "Selected actions for land parcels",
                "type": "array",
                "component": "table",
                "fields": [
                  {
                    "ref": "$.payload.answers.actionApplications[*].sheetId",
                    "type": "string",
                    "label": "Sheet Id"
                  },
                  {
                    "ref": "$.payload.answers.actionApplications[*].parcelId",
                    "type": "string",
                    "label": "Parcel Id"
                  },
                  {
                    "ref": "$.payload.answers.actionApplications[*].code",
                    "type": "string",
                    "label": "Code"
                  },
                  {
                    "ref": "$.payload.answers.actionApplications[*].appliedFor",
                    "type": "string",
                    "label": "Applied For",
                    "format": "{{quantity | fixed(4)}} {{unit}}"
                  }
                ]
              }
            ]
          },
          "agreements": {
            "displayIf" : "$.agreements[0]",
            "title" : "Case grant funding agreement",
            "subtitle" : "Check the grant funding agreement system to see the final terms of the agreement.",
            "sections" : [{
              "title" : "Agreements",
              "type" : "array",
              "component" : "table",
              "rowsRef" : "$.agreements[*]",
              "fields" : [
                {
                  "label" : "Reference",
                  "params" : {
                    "value" : "@.agreementRef"
                  }
                },
                {
                  "label" : "Date",
                  "component" : "date",
                  "params" : {
                    "value" : "@.createdAt"
                  }
                },
                {
                  "label" : "Internal",
                  "component" : "url",
                  "params" : {
                    "text" : "Internal",
                    "href" : {
                      "buildUrl" : {
                        "uriTemplate" : "$.definitions.agreementsService.internalUriTemplate",
                        "params" : {
                          "caseRef" : "$.caseRef",
                          "agreementRef" : "@.agreementRef"
                        },
                        "query" : {
                          "created" : "@.createdAt"
                        }
                      }
                    },
                    "target" : "_blank",
                    "rel" : "noopener"
                  }
                },
                {
                  "label" : "Copy external URL",
                  "component" : "copyToClipboard",
                  "params" : {
                    "text" : {
                      "buildUrl" : {
                        "uriTemplate" : "$.definitions.agreementsService.externalUriTemplate",
                        "params" : {
                          "agreementRef" : "@.agreementRef"
                        },
                        "query" : {
                          "status" : "@.agreementStatus"
                        }
                      }
                    },
                    "buttonText" : "Copy external",
                    "feedbackText" : "Copied to clipboard"
                  }
                },
                {
                  "label" : "Status",
                  "component" : "status",
                  "params" : {
                    "value" : "@.agreementStatus",
                    "classesMap" : {
                      "OFFERED" : "govuk-tag--yellow",
                      "ACCEPTED" : "govuk-tag--blue",
                      "WITHDRAWN" : "govuk-tag--grey"
                    }
                  }
                }
              ]
            }]
          }
        }
      }
    }
  },
  "stages": [
    {
      "id": "application-receipt",
      "title": "Application Receipt",
      "taskGroups": [
        {
          "id": "application-receipt-tasks",
          "title": "Application Receipt tasks",
          "tasks": [
            {
              "id": "simple-review",
              "title": "Simple Review",
              "type": "boolean"
            }
          ]
        }
      ],
      "actionsTitle": "Decision",
      "actions": [
        {
          "id": "approve",
          "label": "Approve",
          "comment": {
            "label": "Approval reason note",
            "helpText": "All notes will be saved for auditing purposes",
            "type": "REQUIRED"
          }
        }
      ]
    },
    {
      "id": "contract",
      "title": "Stage for contract management",
      "taskGroups": [],
      "actions": []
    }
  ],
  "requiredRoles": {
    "allOf": ["ROLE_RPA_ADMIN"],
    "anyOf": ["ROLE_RPA_ADMIN"]
  }
}
