{
  "code": "frps-private-beta",
  "pages": {
    "cases": {
      "details": {
        "banner": {
          "title": {
            "text": "$.payload.businessName",
            "type": "string"
          },
          "summary": {
            "sbi": {
              "label": "SBI",
              "text": "$.payload.identifiers.sbi",
              "type": "string"
            },
            "reference": {
              "label": "Reference",
              "text": "$.caseRef",
              "type": "string"
            },
            "scheme": {
              "label": "Scheme",
              "text": "$.payload.answers.scheme",
              "type": "string"
            },
            "createdAt": {
              "label": "Created At",
              "text": "$.payload.createdAt",
              "type": "date",
              "format": "formatDate"
            }
          }
        },
        "tabs": {
          "case-details": {
            "content": [
              {
                "id": "title",
                "component": "heading",
                "text": "Application",
                "level": 2,
                "classes": "govuk-!-margin-top-8 govuk-!-margin-bottom-1"
              },
              {
                "id": "submittedDate",
                "component": "container",
                "classes": "govuk-body",
                "items": [
                  {
                    "text": "submitted:",
                    "classes": "govuk-!-font-weight-regular"
                  },
                  {
                    "text": "$.payload.submittedAt",
                    "classes": "govuk-!-font-weight-bold",
                    "format": "formatDate"
                  }
                ]
              },
              {
                "id": "answers",
                "component": "summary-list",
                "title": "Answers",
                "type": "object",
                "rows": [
                  {
                    "text": "$.payload.answers.scheme",
                    "type": "string",
                    "label": "Scheme"
                  },
                  {
                    "text": "$.payload.answers.year",
                    "type": "number",
                    "label": "Year"
                  },
                  {
                    "text": "$.payload.answers.hasCheckedLandIsUpToDate",
                    "type": "boolean",
                    "label": "Has checked land is up to date?",
                    "format": "yesNo"
                  },
                  {
                    "text": "$.payload.answers.agreementName",
                    "type": "string",
                    "label": "Agreement Name"
                  }
                ]
              },
              {
                "id": "actions",
                "component": "table",
                "rowsRef": "$.payload.answers.actionApplications[*]",
                "title": "Selected actions for land parcels",
                "type": "array",
                "firstCellIsHeader": true,
                "rows": [
                  {
                    "text": "@.sheetId",
                    "type": "string",
                    "label": "Sheet Id"
                  },
                  {
                    "text": "@.parcelId",
                    "type": "string",
                    "label": "Parcel Id"
                  },
                  {
                    "text": "@.code",
                    "type": "string",
                    "label": "Code"
                  },
                  {
                    "id": "appliedFor",
                    "component": "container",
                    "label": "Applied For",
                    "items": [
                      {
                        "text": "@.appliedFor.quantity",
                        "type": "number",
                        "format": "fixed(4)"
                      },
                      {
                        "text": "@.appliedFor.unit",
                        "type": "string"
                      }
                    ]
                  }
                ]
              }
            ]
          },
          "agreements": {
            "renderIf": "$.supplementaryData.agreements[0]",
            "content": [
              {
                "id": "title",
                "component": "heading",
                "text": "Case grant funding agreement",
                "level": 2,
                "classes": "govuk-!-margin-top-8"
              },
              {
                "id": "subtitle",
                "component": "heading",
                "text": "Check the grant funding agreement system to see the final terms of the agreement.",
                "level": 3,
                "classes": "govuk-inset-text"
              },
              {
                "id": "agreementName",
                "component": "container",
                "classes": "govuk-body",
                "items": [
                  {
                    "text": "Agreement name:",
                    "classes": "govuk-!-font-weight-bold"
                  },
                  {
                    "text": "[agreement name]"
                  }
                ]
              },
              {
                "type": "array",
                "component": "table",
                "rowsRef": "$.supplementaryData.agreements[*]",
                "rows": [
                  {
                    "label": "Reference",
                    "text": "@.agreementRef"
                  },
                  {
                    "label": "Date",
                    "component": "date",
                    "text": "@.createdAt"
                  },
                  {
                    "id": "internal",
                    "component": "container",
                    "label": "View",
                    "items": [
                      {
                        "label": "Internal",
                        "component": "url",
                        "text": "Internal",
                        "href": {
                          "urlTemplate": "$.definitions.agreementsService.internalUrl",
                          "params": {
                            "agreementRef": "@.agreementRef"
                          }
                        },
                        "target": "_blank",
                        "rel": "noopener",
                        "classes": "govuk-!-margin-right-6"
                      },
                      {
                        "label": "External",
                        "component": "copyToClipboard",
                        "text": {
                          "urlTemplate": "$.definitions.agreementsService.externalUrl",
                          "params": {
                            "agreementRef": "@.agreementRef"
                          }
                        },
                        "buttonText": "Copy external",
                        "feedbackText": "Copied to clipboard"
                      }
                    ]
                  },
                  {
                    "label": "Status",
                    "component": "status",
                    "text": "@.agreementStatus",
                    "classesMap": {
                      "OFFERED": "govuk-tag--yellow",
                      "ACCEPTED": "govuk-tag--blue",
                      "WITHDRAWN": "govuk-tag--grey"
                    }
                  }
                ]
              }
            ]
          }
        }
      }
    }
  },
  "stages": [
    {
      "id": "application-receipt",
      "title": "Application Receipt",
      "taskGroups": [
        {
          "id": "application-receipt-tasks",
          "title": "Application Receipt tasks",
          "tasks": [
            {
              "id": "simple-review",
              "title": "Simple Review",
              "type": "boolean"
            }
          ]
        }
      ],
      "actionsTitle": "Decision",
      "actions": [
        {
          "id": "approve",
          "label": "Approve",
          "comment": {
            "label": "Approval reason note",
            "helpText": "All notes will be saved for auditing purposes",
            "type": "REQUIRED"
          }
        }
      ]
    },
    {
      "id": "contract",
      "title": "Stage for contract management",
      "taskGroups": [],
      "actions": []
    }
  ],
  "requiredRoles": {
    "allOf": ["ROLE_RPA_ADMIN"],
    "anyOf": ["ROLE_RPA_ADMIN"]
  },
  "definitions": {
    "agreementsService": {
      "internalUrl": "https://farming-grants-agreements-api.dev.cdp-int.defra.cloud/agreement/review-offer/{agreementRef}",
      "externalUrl": "https://grants-ui.dev.cdp-int.defra.cloud/agreement/review-offer/{agreementRef}"
    }
  }
}
